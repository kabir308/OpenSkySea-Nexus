<?xml version='1.0'?>
<sdf version='1.6'>
  <model name='iris'>
    <link name='base_link'>
      <pose>0 0 0 0 0 0</pose>
      <inertial>
        <mass>1.5</mass>
        <inertia>
          <ixx>0.029125</ixx>
          <ixy>0</ixy>
          <ixz>0</ixz>
          <iyy>0.029125</iyy>
          <iyz>0</iyz>
          <izz>0.055225</izz>
        </inertia>
      </inertial>
      <collision name='base_link_collision'>
        <pose>0 0 0.04 0 0 0</pose>
        <geometry>
          <box>
            <size>0.47 0.47 0.11</size>
          </box>
        </geometry>
      </collision>
      <visual name='base_link_visual'>
        <geometry>
          <mesh>
            <uri>https://fuel.gazebosim.org/1.0/openrobotics/models/iris_drone/tip/files/meshes/iris.dae</uri>
          </mesh>
        </geometry>
      </visual>
      <sensor name='imu_sensor' type='imu'>
        <always_on>1</always_on>
        <update_rate>200</update_rate>
      </sensor>
    </link>

    <!-- Rotor definitions -->
    <link name='rotor_0'>
      <pose>0.13 -0.22 0.023 0 0 0</pose>
      <inertial><mass>0.005</mass><inertia><ixx>9.75e-07</ixx><iyy>0.000273104</iyy><izz>0.000274004</izz></inertia></inertial>
      <visual name='visual'><geometry><mesh><uri>https://fuel.gazebosim.org/1.0/openrobotics/models/iris_drone/tip/files/meshes/iris_prop_ccw.dae</uri><scale>1 1 1</scale></mesh></geometry></visual>
      <collision name='collision'><geometry><cylinder><radius>0.128</radius><length>0.005</length></cylinder></geometry></collision>
    </link>
    <link name='rotor_1'>
      <pose>-0.13 0.22 0.023 0 0 0</pose>
      <inertial><mass>0.005</mass><inertia><ixx>9.75e-07</ixx><iyy>0.000273104</iyy><izz>0.000274004</izz></inertia></inertial>
      <visual name='visual'><geometry><mesh><uri>https://fuel.gazebosim.org/1.0/openrobotics/models/iris_drone/tip/files/meshes/iris_prop_ccw.dae</uri><scale>1 1 1</scale></mesh></geometry></visual>
      <collision name='collision'><geometry><cylinder><radius>0.128</radius><length>0.005</length></cylinder></geometry></collision>
    </link>
    <link name='rotor_2'>
      <pose>0.13 0.22 0.023 0 0 0</pose>
      <inertial><mass>0.005</mass><inertia><ixx>9.75e-07</ixx><iyy>0.000273104</iyy><izz>0.000274004</izz></inertia></inertial>
      <visual name='visual'><geometry><mesh><uri>https://fuel.gazebosim.org/1.0/openrobotics/models/iris_drone/tip/files/meshes/iris_prop_cw.dae</uri><scale>1 1 1</scale></mesh></geometry></visual>
      <collision name='collision'><geometry><cylinder><radius>0.128</radius><length>0.005</length></cylinder></geometry></collision>
    </link>
    <link name='rotor_3'>
      <pose>-0.13 -0.22 0.023 0 0 0</pose>
      <inertial><mass>0.005</mass><inertia><ixx>9.75e-07</ixx><iyy>0.000273104</iyy><izz>0.000274004</izz></inertia></inertial>
      <visual name='visual'><geometry><mesh><uri>https://fuel.gazebosim.org/1.0/openrobotics/models/iris_drone/tip/files/meshes/iris_prop_cw.dae</uri><scale>1 1 1</scale></mesh></geometry></visual>
      <collision name='collision'><geometry><cylinder><radius>0.128</radius><length>0.005</length></cylinder></geometry></collision>
    </link>

    <!-- Joints -->
    <joint name='rotor_0_joint' type='revolute'><child>rotor_0</child><parent>base_link</parent><axis><xyz>0 0 1</xyz></axis></joint>
    <joint name='rotor_1_joint' type='revolute'><child>rotor_1</child><parent>base_link</parent><axis><xyz>0 0 1</xyz></axis></joint>
    <joint name='rotor_2_joint' type='revolute'><child>rotor_2</child><parent>base_link</parent><axis><xyz>0 0 1</xyz></axis></joint>
    <joint name='rotor_3_joint' type='revolute'><child>rotor_3</child><parent>base_link</parent><axis><xyz>0 0 1</xyz></axis></joint>

    <!-- ArduPilot Plugin -->
    <plugin name='ardupilot_plugin' filename='libArduPilotPlugin.so'>
      <modelName>iris</modelName>
      <imuName>imu_sensor</imuName>
      <control>
        <rotor>
          <jointName>rotor_0_joint</jointName>
          <direction>ccw</direction>
          <motorConstant>8.54858e-06</motorConstant>
          <momentConstant>1.6e-9</momentConstant>
        </rotor>
        <rotor>
          <jointName>rotor_1_joint</jointName>
          <direction>ccw</direction>
          <motorConstant>8.54858e-06</motorConstant>
          <momentConstant>1.6e-9</momentConstant>
        </rotor>
        <rotor>
          <jointName>rotor_2_joint</jointName>
          <direction>cw</direction>
          <motorConstant>8.54858e-06</motorConstant>
          <momentConstant>1.6e-9</momentConstant>
        </rotor>
        <rotor>
          <jointName>rotor_3_joint</jointName>
          <direction>cw</direction>
          <motorConstant>8.54858e-06</motorConstant>
          <momentConstant>1.6e-9</momentConstant>
        </rotor>
      </control>
    </plugin>
  </model>
</sdf>
